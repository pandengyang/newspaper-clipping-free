let t=null,e=null,m=null,r=null,i=null,c=window.onmousemove;console.log("inject content.js");function s(n){var o=document.elementFromPoint(n.clientX,n.clientY);o&&o!==e&&(e&&e.classList.remove("nc-delete-mask"),o.classList.add("nc-delete-mask"),e=o,o.onclick=function(l){if(l.preventDefault(),e){console.log(e.nodeName);let a=e.nodeName.toLowerCase();if(a=="html"||a=="body"){console.log("can not remove html or body");return}m=e,r=e.parentElement,i=e.nextSibling,e.remove(),e=null}return!1})}function u(n){var o=document.elementFromPoint(n.clientX,n.clientY);o&&o!==e&&(e&&e.classList.remove("nc-capture-mask"),o.classList.add("nc-capture-mask"),e=o,o.onclick=function(l){return l.preventDefault(),!1})}chrome.runtime.onMessage.addListener(function(n,o,l){if(console.log(n),n.target=="CONTENT"){if(n.method=="get"&&n.res=="mode"){l({mode:t});return}n.method=="put"&&n.res=="mode"&&(t=n.data,console.log(t),t==="newspaper-clipping"?window.onmousemove=s:t==="capture"?window.onmousemove=u:window.onmousemove=c,e&&(e.classList.remove("nc-delete-mask"),e.classList.remove("nc-capture-mask"),e=null),console.log("response mode: "+{mode:t}),l({mode:t})),n.method=="post"&&n.res=="undo"&&(m&&r?(r.insertBefore(m,i),m.classList.remove("nc-delete-mask"),m=null,r=null,i=null,l({undo:!0})):l({undo:!1}))}});
